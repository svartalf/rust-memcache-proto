#![feature(test)]
extern crate test;
extern crate memcache_proto;

use test::Bencher;

use memcache_proto::Response;

#[bench]
fn bench_response_deserialization(b: &mut Bencher) {
    let buf: Vec<u8> = vec![
        0x81, 0x0c, 0x00, 0x05,
        0x04, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x0e,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x01,
        0xde, 0xad, 0xbe, 0xef,
        0x48, 0x65, 0x6c, 0x6c,
        0x6f, 0x57, 0x6f, 0x72,
        0x6c, 0x64,
    ];

    b.iter(|| {
        Response::read(&buf);
    });
}
